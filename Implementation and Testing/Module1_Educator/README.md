# Implement and Testing: Module 1

모듈 1의 소스코드 구현과 테스팅 중 생긴 이슈 및 진행상황을 정리한 문서

1. [각종 이슈](#구현-관련)
2. [진행 상황](#진행-상황)

-------

### Interface 관련

파이썬은 interface가 따로 없는 관계로 추상 클래스로 비슷하게 구현함.

### ValidChecker 검사 순서

권한 -> 바디 유무 -> 바디별 포멧, 값

### 에러 유형

바디가 없을 때: 'body: 바디이름 is not exist.'</br>
값 형식이 잘못되었을 때: 'Wrong format -> body: 바디이름=입력값'</br>
값 자체가 잘못되었을 때: 'Wrong value-> body: 바디이름=입력값'</br>
아무튼 값이 뭔가 잘못되었을 때: ex) 'Wrong date -> body: deadline=입력값'</br>
입력한 ID에 해당하는 내용을 DB에서 못 찾았을 때: 'Cannot find 입력ID in 해당DB'</br>

### DB 커넥션에 대하여

ValidChecker가 DB커넥션과 연결되어야 하는가?</br>
ValidChecking 단계에서 찾고자 하는 오브젝트가 DB에 있는지 알아봐야 하나?

-> ValidChecker는 그냥 쿼리 유효성과 포멧 검사만 해주고, Event까지 넘어간 시점에서 DB커넥션이 하는걸로.</br>
ValidChecker가 그걸 다 할 필요는 없다.

-> 아직 반영이 안됨. 테스팅 이후에 각 DB커넥션 별로 서치 메소드를 구현하는 쪽으로 생각 중.

### PageMaker에 대하여

Event Pub-Sub방식으로 하면 PageMaker도 이벤트 구독자로 들어가야되나 했는데, 
최종 결과물이 페이지라서, 이걸 연쇄적으로 리턴하려면 페이지 메이커는 별도로 두는게 낫겠다 싶었음.

대신 각 이벤트별로 각 구독자들이 무조건 ('자기이름',결과) 형식의 튜플을 반환하게 하고, 최종적으로 페이지 메이커가 결과 산출할 때 이를 참고하게 함.</br>
이건 이벤트별로 조금씩 달라질 수 있음.
Event Manager가 중개해주는 느낌이니까 크게 상관 없을 듯?

### ClassDiagram - Decorator의 메소드 및 파라미터

1. 처음엔 리퀘스트별로 메소드를 다 만들었다.</br>
   메소드가 너무 많고, 메소드 하나 추가할 때마다 모든 데코레이터한테 일일히 다 추가해줘야 함.</br>
   -> 리퀘스트의 내용을 쿼리에 포함하는 것으로 하고, 데코레이터는 쿼리에 필요한 전처리를 하는 'createPage' 하나만 쓰도록 함.</br>
   -> 만약 리퀘스트가 추가되거나, 파싱 정책이 바뀐다면, ValidChecker 선에서 모두 해결 가능.
2. 데코레이터를 거쳐갈 때마다 메소드의 파라미터가 바뀐다.</br>
   인터페이스의 정의를 생각해보면 메소드의 파라미터가 바뀌면 안되는데, 유동적으로 조금씩 바뀔 필요가 있다.</br>
   그리고 사용 언어가 파이썬이라서 파라미터의 변화에 유동적으로 대처 가능하다.</br>
   이 점을 살리는 편이 더 낫다고 판단했고, 사실 파이썬이 아니더라도 전부 Object 타입이라고 치면 크게 문제되지 않는다.

위 내용들 다 반영해서 최종적으로 Class Diagram을 수정하는게 좋을 것 같다.

-------

### 진행 상황

이전 회의 결과에 따라, 구현은 김윤혁 학우가, 테스팅은 구건모 학우가 담당하는 것으로 합의됨.

2021-05-29:</br>
1차 구현 내용 업로드 완료. 
이에 대한 테스팅 기다리는 중.

__구현 관련__:
1차 구현 내용은 전체적인 틀을 잡고, 각 오브젝트가 무슨 일을 하게 될지를 콘솔에 출력하도록 하였음.</br>
PageMaker가 실제로 HTML 문서를 만들어 내지 않고, 어떤 자료로 어떤 페이지를 생성할 것이라는 내용만 출력.

특히 DB커넥션은 지금 실제로구현된 DB가 없으므로, 실제로 해당 오브젝트를 생성하거나 꺼내오지 않음.</br>
테스팅을 위해서 특정 id가 어떤 상황을 의미하게끔 임시로 구현함.

1차 테스팅에 대한 피드백 이후로 시간이 남는다면 DB작업에 조금 더 집중할 듯 함.</br>
서버를 실제로 만드는 것은 비용면에서 조금 생각해볼만한 문제고, 로컬에서 txt파일로 정리하는 정도를 생각 중.

__테스팅 관련__:
파싱 중 에러가 발생할 가능성이 높다고 생각함.</br>
또, 각 바디의 타입이나 포멧을 체크하는 부분이 상세히 구현되어있지 않음.</br>
이 부분을 중점적으로 테스트 할 것을 요청했으며, 테스팅 결과를 바탕으로 상세한 예외처리 진행할 예정.

2021-05-31:</br>
1차 구현에 대한 테스팅 바탕으로 디버깅 완료.

쿼리 및 바디의 포맷 유효성에 대한 테스팅에서 예외처리가 충분하지 못한 부분이 많았고, </br>
테스트 내용 바탕으로 모두 예외처리 완료.
